---
layout: post
title: Redis
date: 2019-11-20
categories: test
tags: Redis

---

# Redis

### 雪崩

指的是redis中 很多key在某一时刻同时失效 直接一起请求数据库

解决方法:把每个key的实效时间都加个随机值 就能有效的保证key不会在同一时间 大面积失效了

### 缓存穿透

缓存和数据库没有的东西 比如id自增是从1开始的 有人不断的访问id为-1的

解决方法:

1. 后端验证数据
2. 数据库查不到的数据做个缓存 值为null 设置有效时间30秒
3. 限制访问的次数 对每个ip每秒访问次数超出阈值的 进行拉黑
4. redis的布隆过滤器 (bloom filter) 用高效的数据结构和算法快速判断这个key是否在数据库中 不存在就return

### 缓存击穿

有一个非常热点的key 在不停的扛着大并发 在key失效的瞬间 持续的大并发就穿破缓存 直接请求数据库 就像在完好无损的桶上凿了一个洞

解决方法

1. 设置热点key用不过期
2. 加上互斥锁